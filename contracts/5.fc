() recv_internal() {
}
forall X -> tuple tpush(tuple t, X value) asm "TPUSH";
forall X -> (tuple, ()) ~tpush(tuple t, X value) asm "TPUSH";
tuple empty_tuple() asm "NIL";

(tuple) get_fibonacci (int n, int k) inline
  asm """
  -1 INT 1 INT
  1 SETGLOB
  <{
  TUCK ADD
  }>REPEAT
  1 GETGLOB
  <{
  DUP2 ADD
  }>REPEAT
  1 GETGLOB
  TUPLEVAR
  """;


;; testable
(tuple) fibonacci_sequence (int n, int k) method_id {
  if(k == 0) {
    return empty_tuple();
  }

  return get_fib(n, k);
}
